<!DOCTYPE html>
<html>
    <head>
        <meta charset='UTF-8'>
        <title>Line Widget – UploadCare tests</title>
        <script src="./../../node_modules/jquery/dist/node-jquery.js"></script>
        <script>
            var lang = (location.hash || '#en').substr(1);
            var src  = './../../pkg/line-widget.' + lang + '.js';
            document.write('<script src="' + src + '" ' +
                                   'data-public-key="ABCDEF"><' + '/script>');
        </script>
        <script>
            UploadCare.upload = function (file, options) {
                file.replaceWith(file.clone(true));

                var deferred = this.jQuery.Deferred();
                if ( UploadCare.jQuery('#error').prop('checked') ) {
                    setTimeout(function () {
                        deferred.reject();
                    }, 800);
                } else {
                    setTimeout(function () {
                        deferred.resolve();
                    }, 5000);
                }

                return deferred.promise();
            };
        </script>
    </head>
    <body>
        <h1>UploadCare Line Widget</h1>
        <p>Don’t forget to execute <code>node_modules/.bin/cake watch</code></p>
        <p><label><input type="checkbox" id="error"> Mock error</label></p>
        <input type="hidden" role="uploadcare-line-uploader" />
    </body>
</html>
